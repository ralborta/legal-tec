[phases.setup]
# Fijar snapshot de nixpkgs que incluye Node.js 22.13.1
# Este snapshot resuelve el problema de Railway usando Node 18 por defecto
nixpkgsArchive = "51ad838b03a05b1de6f9f2a0fffecee64a9788ee"

[phases.install]
cmds = ["rm -rf node_modules .npm", "npm ci --legacy-peer-deps"]

[phases.build]
cmds = ["npm run build"]

[start]
cmd = "NODE_ENV=production node dist/index.js"


[phases.setup]
# IMPORTANTE: Configurar NIXPACKS_NODE_VERSION=22 en Railway Variables
# No especificar nodejs_22 aquí porque no existe en Nixpkgs
# Railway detectará la variable NIXPACKS_NODE_VERSION automáticamente
nixPkgs = ["nodejs"]

[phases.install]
cmds = ["rm -rf node_modules .npm", "npm ci --legacy-peer-deps"]

[phases.build]
cmds = ["npm run build"]

[start]
cmd = "NODE_ENV=production node dist/index.js"

